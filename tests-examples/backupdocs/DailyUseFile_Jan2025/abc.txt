God Is Great

===============================================================================================================
#PIPE
===============================================================================================================
- open yaml file | install git crypt

#Team Desc
LCC - Team Near to Car via Bluetooth
RCC - Device Platform Team
VDBS -
CAT Nav - Navgation SDK
Device Platform
VUM -
VCF -

MQTT notification via SDK > BFF


===============================================================================================================
===============================================================================================================
#Test Session


20 Nov 2024 |
  IMP: Notificaiton format changes
  #VW  | VIN will not contains AU
    container_name:vehicle-notifications-service
    eventhub.message.type:charging/status
    outgoing will have notifcation type, title etc
    https://onenr.io/0qwLobGa3Q5
    All VW notficaitons:                   "container_name":"vehicle-notifications-service" "message":"incoming EventHub message*'" "stage":"sb"

    https://onenr.io/0qwLaZ0NrR5
    All VW notification from Nov 28 on SB: "container_name":"vehicle-notifications-service" "message":"incoming kafka message"  "stage":"sb" "eventhub.message.VIN":"*VW*" -"level":"ERROR"


  #Audi  | VIN contains AU
    message:incoming vcf notification charging/status
    container_name:mnp-notifications-service   |  Moved to MNP
    Both xml and JSON output, No title in mnp event value json
    https://onenr.io/0vjA5kGmgjP
    All Audi notificaitions: "container_name":"mnp-notifications-service" "message":"incoming vcf notification*" "stage":"sb"


#Notes:
25 June 2024: APNS Priority has been set to 10(max) as per APNS Docs https://github.com/vwdfive/cariad-bff/pull/4010/files    WEDEFECT-9906

#Any AUDI/VW Notifications from 20 Nov 2024
Audi:    "container_name":"mnp-notifications-service" "message":"incoming vcf notification*" "stage":"sb"
VW:      "container_name":"vehicle-notifications-service"  "message":"incoming EventHub message*'" "stage":"sb"

#Any type of LOUD notifications:
"notification_type":"LOUD" Req.Body:"*WVWZZZED6RE000081*"
"notification_type":"LOUD" Req.Body:"*WVWZZZCJ2SD000003*" Req.Body:"*GEO*"

"eventhub.message.result":"charging_started" "eventhub.message.VIN":"WAUZZZGF1SA000501"
"eventhub.message.result":"charging_finished" "eventhub.message.VIN":"WAUZZZGF1SA000501"
"eventhub.message.result":"fail_charge_infrastructure" "eventhub.message.VIN":"WAUZZZGF1SA000501"

"WS.Message.data.result":"charging_started"  "stage":"sb" "WS.Message.data.VIN":"WAUZZZGF1SA000501"
"WS.Message.data.result":"charging_finished"  "stage":"sb" "WS.Message.data.VIN":"WAUZZZGF1SA000501"
"WS.Message.data.result":"fail_charge_infrastructure"  "WS.Message.data.VIN":"WAUZZZGF1SA000501"

https://devstack.vwgroup.com/jira/browse/WEDEFECT-8709  VCF/VDBS comments for missing notificaitons



"eventhub.message.type":"alerts/speed" "eventhub.message.VIN":"WVGZZZCT5SW000031"
"eventhub.message.type":"alerts/theftalarm" "eventhub.message.VIN":"WAUZZZGF1SA000501"      https://onenr.io/08jq5oJgejl    To find antitheft alarm
"eventhub.message.type":"alerts/geofence" "eventhub.message.VIN":"WVGZZZA1ZSV000009"
"Req.URI":"/v2/device/settings" Req.Body:"*deviceID*"          https://onenr.io/0PwJ5O8pLQ7       To find deviceId settings, if notif is enabled or not
"Req.URI":"/v1/vehicles/WAUZZZGF1SA000501/subscriptions"        https://onenr.io/0PwJ5OOG7Q7      To find if VIN is subscriber to alerts or not


"eventhub.message.type":"alerts/childpresence" "eventhub.message.VIN":"WAUZZZGH7SA000813"

#TOPICS
"Req.Path":"/v2/device/settings" Req.Body:"*antitheftalarm*" "stage":"sb"
"Req.Path":"/v2/device/settings" Req.Body:"*antitheftalarm*" "Req.Headers.user-agent":"*IOS*"
"Req.Path":"/v2/device/settings" Req.Body:"*THEFTPROTECTION*" "Req.Headers.user-agent":"*android*"          | Wrong for android ---shd not come any result




#Logout
Req.Body:"*false*" "Req.Path":"/v2/device/settings" "stage":"sb" "Resp.StatusCode":"204" https://onenr.io/0qwyzkpOeRn
Logout enabled=false



WARNING_INSUFFICIENT_BATTERY_LEVEL
"message":"incoming EventHub message \'connectionWarning/warning_insufficient_battery_level\'" "stage":"sb"
eventhub.message:"*warning_insufficient_battery_level*" eventhub.message:"*BVWTDMEDZ24080601*"

#CPD
Req.Body:"*child_locked_in_car*" Req.Body:"*WAUZZZGH7SAXXXX13*"  https://onenr.io/0Bj36nyK2RX
 "eventhub.message.type":"alerts/childpresence" "eventhub.message.VIN":"WAUZZZGH7SA000813"


#PRM incoming eventhub  | CARIADBFF-2384
"message":"incoming EventHub message \'PRM\'"   stage:"sb"
"eventhub.message.type":"PRM"


#VUM
"sbq_message.eventType":"GUEST_USER_SET" "stage":"sb"                         https://onenr.io/0bRmxKlrZwy
GUEST_USER_SET   push_notification_nowguestuser_title                         https://onenr.io/0VjYv7zgqQ0
GUEST_USER_SET_PU_NOTIFY   push_notification_newguestuserlogin_title          https://onenr.io/0LREv4035ja
"sbq_message.eventType":"*" "sbq_message.body.vin":"WVWZZZCD2RW500042"        All VUM notification


#WarningLights
"Req.Path":"/vehicles/*/warninglights/last" Resp.Body:"*Error: Headlight range adjustment*"
"Req.Path":"/vehicles/*/warninglights/last" Resp.Body:"*customerRelevance\":false*"       outgoing
Resp.Body:"*customerRelevance\":false*" "Req.Header.User-Agent":"*Audi*" "stage":"sb"    incoming   https://onenr.io/0BQraKrM8jZ
Resp.Body:"*customerRelevance\":true*" "Req.Header.User-Agent":"*MySkoda*" "stage":"sb"
Resp.Body:"*customerRelevance\":true*" "Req.Header.User-Agent":"*Volkswagen*"  "stage":"sb"       TODO Not work as customerRelevance field is missing in selective status
Resp.Body:"*iconName*" "Req.Header.User-Agent":"*Volkswagen*" "stage":"sb"                   Working
Resp.Body:"*customerRelevance\":true*" "Req.Header.User-Agent":"*Volkswagen*"  "stage":"sb"


Notes:
    29 Aug 2024, AUDI > customerRelevance not coming in response to FE  https://onenr.io/0bRKLYl0OjE
    4th Sept 2024 Skoda > customerRelevance not coming in response to FE https://onenr.io/0VRVrmnlMRa         TODO BUG
    VW: customerRelevance never comes in response to FE https://onenr.io/07jbz5LdBjy


#vehiclehealthwakeup
"Req.URI":"*/vehiclehealthwakeup/*" "stage":"sb" -"Req.Headers.user-agent":"*audi*"  -"Req.Headers.user-agent":"*skoda*" "stage":"sb"           | VW
"Req.URI":"*/vehiclehealthwakeup/*"  Resp.Body:"*customerRelevance\":f*"  "Req.Headers.user-agent":"*audi*"
"Req.URI":"*/vehiclehealthwakeup/*"  Resp.Body:"*customerRelevance\":f*" "Req.Headers.user-agent":"*one*"
"Req.URI":"*/vehiclehealthwakeup/*"  Resp.Body:"*customerRelevance\":f*" "Req.Headers.user-agent":"*skoda*"
"Req.URI":"*/vehiclehealthwakeup/*"  Resp.Body:"*customerRelevance\":false*" "Req.Headers.user-agent":"*skoda*"  "stage":"sb"

Notes:
    4th Sept 2024 AUDI > customerRelevance not coming in response to FE https://onenr.io/0dQeJdDZDwe
    SKODA : customerRelevance coming in Prod as of today 30 Sept  https://onenr.io/0Owv5aGNDQv
        TODO chk in SB
    VW(Android) customerRelevance coming in Prod as of today 30 Sept https://onenr.io/0Owv5aGZOQv
        TODO Can see in SB after 13 Sept https://onenr.io/0KQXrMzndRa






#ORU
https://devstack.vwgroup.com/jira/browse/CARIADBFF-2245
VEHICLE_SOFTWARE_UPDATE_AVAILABLE
VEHICLE_SOFTWARE_UPDATE_IN_PROGRESS
VEHICLE_SOFTWARE_UPDATE_COMPLETED
VEHICLE_SOFTWARE_UPDATE_CANCELLED
updateAvailable: https://onenr.io/0EjOK1aLDj6

#Audi Prod EMEA  OruLiveee@gmail.com  / Audi1234
"sub": "94e8b8fc-9ab3-4571-8118-761a993c07f8",



#Features endpoint mappings
RVS       Remote Vehicle Status
Carfinder Car Finder                       /parkingPosition    https://onenr.io/00jl5J4PPQW
RPC       Remote PreTrip Climatization
RLU       Remote Lock & Unlock             /VIN/access/lock      /VIN/access/unlock
RBC       Remote Battery Charging

VHR
VSR

Req.Header.tenant:AUDI


XID_APP_AUDI / charging / vehicleInitiated-charging_finished
XID_APP_AUDI / charging / vehicleInitiated-charging_started
XID_APP_AUDI / charging / vehicleInitiated-fail_charge_infrastructure
XID_APP_AUDI / charging / vehicleInitiated-batterycare
XID_APP_AUDI / charging / vehicleInitiated-fail
XID_APP_AUDI / charging / vehicleInitiated-profilestatus
XID_APP_AUDI / charging / vehicleInitiated-settings
XID_APP_AUDI / charging / vehicleInitiated-status
XID_APP_AUDI / charging / vehicleInitiated-target_soc_not_reachable
XID_APP_AUDI / charging / vehicleInitiated-target_soc_reached


VW : GEO SpeedAlert TheftAlarm
Car -> Device Platform -> VCF -> BFF -> FCM -> App
iOS | Car -> Device Platform -> VCF -> BFF -> MNP -> APNS -> iOS
Web Socket to Event Hub Switch https://devstack.vwgroup.com/jira/browse/CARIADBFF-2013
Audi

WAUZZZGF1SA000501 subscriptions
"Req.URI":"/topics/WAUZZZGF1SA000501/subscriptions"                 https://onenr.io/0kjn6NrdYjo   https://onenr.io/0oR873NxMwG
WAUZZZGF1SA000501 container_name:"vehicle-notifications-service"
WAUZZZGF1SA000501 container_name:"mnp-notifications-service"


incoming /topics/WAUZZZGF1SA000501/subscriptions             https://onenr.io/0gR7q74apQo
outgoing vcf /vehicles/WAUZZZGF1SA000501/subscriptions

bff depricated /vehicle/v1/vehicles/{vin}/subscriptions
use  /notification/v1/topics/{vin}/subscriptions

{vin}/subscriptions/settings
vcf get /vehicles/{vin}/subscriptions/settings

================================================================================
================================================================================
